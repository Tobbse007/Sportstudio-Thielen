<section class="animated-section {{spacing}} bg-[{{backgroundColor}}]">
  <div class="{{containerWidth}} mx-auto px-6">
    <div class="text-center mb-16">
      <h2 class="anim-item anim-delay-1 text-4xl md:text-5xl {{fontFamily}} {{fontWeight}} mb-4 text-[{{textColor}}]" contenteditable="true">
        Warum Sportstudio Thielen?
      </h2>
      <p class="anim-item anim-delay-2 text-lg text-[{{textColor}}]/60 max-w-2xl mx-auto {{fontSize}}" contenteditable="true">
        Entdecke die Vorteile eines authentischen Oldschool Gyms
      </p>
    </div>
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Box 1 -->
      <div class="anim-item anim-delay-3 hover-lift group text-center p-8 bg-white rounded-[{{borderRadius}}] shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-[{{primaryColor}}]">
        <div class="w-16 h-16 bg-gradient-to-br from-[{{primaryColor}}] to-[{{accentColor}}] rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform">
          <i class="fa-solid fa-dumbbell text-2xl text-white"></i>
        </div>
        <h3 class="text-xl {{fontWeight}} mb-3 text-[{{textColor}}]" contenteditable="true">Oldschool</h3>
        <p class="text-[{{textColor}}]/60 {{fontSize}}" contenteditable="true">Authentisches Gym-Feeling ohne Schnickschnack</p>
      </div>
      
      <!-- Box 2 -->
      <div class="anim-item anim-delay-4 hover-lift group text-center p-8 bg-white rounded-[{{borderRadius}}] shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-[{{primaryColor}}]">
        <div class="w-16 h-16 bg-gradient-to-br from-[{{primaryColor}}] to-[{{accentColor}}] rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform">
          <i class="fa-solid fa-users text-2xl text-white"></i>
        </div>
        <h3 class="text-xl {{fontWeight}} mb-3 text-[{{textColor}}]" contenteditable="true">Familiär</h3>
        <p class="text-[{{textColor}}]/60 {{fontSize}}" contenteditable="true">Man kennt sich und hilft sich gegenseitig</p>
      </div>
      
      <!-- Box 3 -->
      <div class="anim-item anim-delay-5 hover-lift group text-center p-8 bg-white rounded-[{{borderRadius}}] shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-[{{primaryColor}}]">
        <div class="w-16 h-16 bg-gradient-to-br from-[{{primaryColor}}] to-[{{accentColor}}] rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform">
          <i class="fa-solid fa-person-running text-2xl text-white"></i>
        </div>
        <h3 class="text-xl {{fontWeight}} mb-3 text-[{{textColor}}]" contenteditable="true">Frei</h3>
        <p class="text-[{{textColor}}]/60 {{fontSize}}" contenteditable="true">Selbstständiges Training ohne Trainer-Zwang</p>
      </div>
      
      <!-- Box 4 -->
      <div class="anim-item anim-delay-6 hover-lift group text-center p-8 bg-white rounded-[{{borderRadius}}] shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-[{{primaryColor}}]">
        <div class="w-16 h-16 bg-gradient-to-br from-[{{primaryColor}}] to-[{{accentColor}}] rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform">
          <i class="fa-solid fa-clock text-2xl text-white"></i>
        </div>
        <h3 class="text-xl {{fontWeight}} mb-3 text-[{{textColor}}]" contenteditable="true">Flexibel</h3>
        <p class="text-[{{textColor}}]/60 {{fontSize}}" contenteditable="true">Täglich von 06:00 - 22:00 Uhr geöffnet</p>
      </div>
    </div>
  </div>
  
  <!-- Universal Animation System with Scroll Trigger -->
  <style>
    /* Base Section - STARTET UNSICHTBAR */
    .animated-section {
      opacity: 0;
      transform: translateY(20px);
    }
    
    /* AKTIV wenn im Viewport */
    .animated-section.anim-active {
      animation: sectionFadeIn 0.8s ease-out forwards;
    }
    
    /* Animated Items - STARTET UNSICHTBAR */
    .anim-item {
      opacity: 0;
      transform: translateY(30px);
    }
    
    /* AKTIV wenn Section im Viewport */
    .animated-section.anim-active .anim-item {
      animation: itemFadeIn 0.6s ease-out forwards;
    }
    
    .anim-delay-1 { animation-delay: 0.1s; }
    .anim-delay-2 { animation-delay: 0.2s; }
    .anim-delay-3 { animation-delay: 0.3s; }
    .anim-delay-4 { animation-delay: 0.4s; }
    .anim-delay-5 { animation-delay: 0.5s; }
    .anim-delay-6 { animation-delay: 0.6s; }
    
    /* Keyframes */
    @keyframes sectionFadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes itemFadeIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Hover Effects */
    .hover-lift {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .hover-lift:hover {
      transform: translateY(-4px) scale(1.02);
    }
    
    .hover-scale {
      transition: transform 0.3s ease;
    }
    
    .hover-scale:hover {
      transform: scale(1.05);
    }
    
    .hover-glow {
      transition: box-shadow 0.3s ease;
    }
    
    .hover-glow:hover {
      box-shadow: 0 0 20px rgba(37, 99, 235, 0.4);
    }
  </style>
  
  <!-- Scroll-Triggered Animation Script -->
  <script>
    (function() {
      // Nur einmal initialisieren
      if (window.animationObserverInitialized) return;
      window.animationObserverInitialized = true;
      
      // Funktion zum Initialisieren des Observers
      function initAnimationObserver() {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('anim-active');
            }
          });
        }, {
          threshold: 0.05,  // Noch früher triggern (5%)
          rootMargin: '50px' // Auch nach oben erweitern
        });
        
        // Alle animated-sections beobachten
        const animatedSections = document.querySelectorAll('.animated-section');
        animatedSections.forEach(section => {
          observer.observe(section);
          
          // SOFORT aktivieren wenn schon sichtbar (Above-the-fold)
          const rect = section.getBoundingClientRect();
          if (rect.top < window.innerHeight && rect.bottom > 0) {
            section.classList.add('anim-active');
          }
        });
      }
      
      // Sofort initialisieren UND bei DOMContentLoaded als Fallback
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initAnimationObserver);
      } else {
        initAnimationObserver();
      }
      
      // Zusätzlich nach kurzer Verzögerung (für dynamisch geladene Sections)
      setTimeout(initAnimationObserver, 100);
    })();
  </script>
</section>